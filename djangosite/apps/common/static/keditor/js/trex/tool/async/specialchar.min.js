/* kmslab_editor 3.0.1 */

!function(){var a=document;window,a.documentElement;TrexMessage.addMsg({"@specialchar.cancel.image":Trex._I18N.g("btn_l_cancel","#iconpath/btn_l_cancel.gif?open&v=2"),"@specialchar.confirm.image":Trex._I18N.g("btn_l_confirm","#iconpath/btn_l_confirm.gif?open&v=2"),"@specialchar.title":Trex._I18N.g("specialchar.title","선택한 기호")}),Trex.Class.overwrite(Trex.Tool.SpecialChar,{oninitialized:function(){var a=this.canvas,b=function(b){b&&a.execute(function(a){if($tx.msie_docmode<9){var c="char"+(new Date).getTime();a.pasteContent('<span id="'+c+'">'+b+"</span>",!1);var d=a.doc.getElementById(c);$tom.unwrap(d)}else a.pasteContent(b,!1)})};this.resetWeave(),this.weave.bind(this)(new Trex.Button(this.buttonCfg),new Trex.Menu.SpecialChar(this.menuCfg),b)}}),Trex.MarkupTemplate.add("menu.specialchar.input",['<dl class="tx-menu-matrix-input">',"\t<dt><span>@specialchar.title</span></dt>",'\t<dd><input type="text" value=""/></dd>','\t<dd><img class="tx-menu-btn-confirm" src="@specialchar.confirm.image" align="absmiddle"/></dd>','\t<dd><img class="tx-menu-btn-cancel" src="@specialchar.cancel.image" align="absmiddle"/></dd>',"</dl>"].join("")),Trex.Menu.SpecialChar=Trex.Class.create({$extend:Trex.Menu.Matrix,ongenerated:function(){var a=this.elMenu,b=Trex.MarkupTemplate.get("menu.specialchar.input").evaluateAsDom({});$tom.append($tom.collect(a,"div.tx-menu-inner"),b);var c=this.elInput=$tom.collect(b,"input"),d=$tom.collectAll(b,"img");2==d.length&&($tx.observe(d[0],"click",function(){this._command(this.elInput.value),this.hide()}.bind(this)),$tx.observe(d[1],"click",function(){this.onCancel()}.bind(this))),$tx.observe(c,"keydown",function(a){13==a.keyCode&&($tx.stop(a),this._command(this.elInput.value),this.hide())}.bind(this))},onregenerated:function(){this.elInput.value="",this.elInput.focus()},onSelect:function(b){var c=this.elInput,d=$tx.findElement(b,"span");if((!d.tagName||"span"==d.tagName.toLowerCase())&&(c.value+=d.innerText&&"&nbsp;"!=d.innerText&&""!=d.innerText.trim()?d.innerText:"",$tx.stop(b),c.focus(),$tx.msie))try{var e=a.selection.createRange();e.move("character",c.value.length),e.select()}catch(a){}}});Editor.forEachEditor(function(a){a.getTool().specialchar.oninitialized()}),Editor.editorForAsyncLoad.getTool().specialchar.forceActivate()}();