/* kmslab_editor 3.0.1 */

function ImageUploader(){}ImageUploader.APPLET_CODEBASE=document.location.protocol+"//"+document.location.host+"/keditor/",ImageUploader.APPLET_CODE="com.kmslab.imgctrl.ImageControl",ImageUploader.APPLET_ARCHIVE="ImageControl.2.0.0.3.jar",ImageUploader.APPLET_WIDTH="10",ImageUploader.APPLET_HEIGHT="10",ImageUploader.APPLET_MINIMUM_VERSION="1.6.0_24",ImageUploader.DISABLED=!1,ImageUploader.IS_DEPLOYED=!1,ImageUploader.IS_INIT=!1,ImageUploader.JS_CONNECTOR=null,ImageUploader.CONTROL=null,ImageUploader.JRE_INSTALLED=null,ImageUploader.PARAM={},ImageUploader.deploy=function(a){a&&(ImageUploader.APPLET_CODEBASE=a);var b=navigator.userAgent,c=b.toLowerCase();if(c.indexOf("mobile")>-1||c.indexOf("android")>-1||c.indexOf("iphone")>-1||c.indexOf("ipad")>-1||c.indexOf("blackberry")>-1||c.indexOf("opera mini")>-1||c.indexOf("iemobile")>-1||!function(){var a=window.navigator.userAgent.match(/Chrome\/(\d+)\./);return!(a&&a[1]&&parseInt(a[1],10)>=42&&!function(){var a=/(Java)(\(TM\)| Deployment)/,b=navigator.plugins;if(navigator&&b)for(plugin in b)if(b.hasOwnProperty(plugin)&&a.exec(b[plugin].name))return!0;return!1}())}())return ImageUploader.DISABLED=!0,void(ImageUploader.JRE_INSTALLED=!0);if(!ImageUploader.IS_DEPLOYED){var d={id:"idImageUploader",type:"application/x-java-applet",codebase:ImageUploader.APPLET_CODEBASE,code:ImageUploader.APPLET_CODE,archive:ImageUploader.APPLET_ARCHIVE,width:ImageUploader.APPLET_WIDTH,height:ImageUploader.APPLET_HEIGHT,style:"z-index:4000;position:absolute;left:-200px;top:-200px;width:"+ImageUploader.APPLET_WIDTH+"px;height:"+ImageUploader.APPLET_HEIGHT+"px;overflow:hidden;"};if(ImageUploader.JS_CONNECTOR="_ImageUploader",window[ImageUploader.JS_CONNECTOR]=ImageUploader,ImageUploader.PARAM.JSConnectName=ImageUploader.JS_CONNECTOR,window.deployJava&&window.deployJava.runApplet&&!ImageUploader.is_mobile){var e=window.deployJava.runApplet(d,ImageUploader.PARAM,ImageUploader.APPLET_MINIMUM_VERSION);ImageUploader.JRE_INSTALLED=!(!1===e)}else{var f="";f+='<applet id="'+d.id+'" codebase="'+d.codebase+'" code="'+d.code+'" archive="'+d.archive+'" width="'+d.width+'" height="'+d.height+'" >';for(var g in ImageUploader.PARAM)f+='<param name="'+g+'" value="'+ImageUploader.PARAM[g]+'">';f+='<param name="java_version" value="'+ImageUploader.APPLET_MINIMUM_VERSION+'+">',f+="</applet>";var h=document.createElement("div");h.style.zIndex=4e3,h.style.position="absolute",h.style.left="-200px",h.style.top="-200px",h.style.width="10px",h.style.height="10px",h.innerHTML=f,document.body.appendChild(h),ImageUploader.JRE_INSTALLED=!0}ImageUploader.CONTROL=document.getElementById(d.id),ImageUploader.IS_DEPLOYED=!0}},ImageUploader.checkJRE=function(a){function b(){c.resolve(ImageUploader.JRE_INSTALLED)}var c=a.Deferred(),d=setInterval(function(){null!=ImageUploader.JRE_INSTALLED&&(b(),clearInterval(d))},1e3);return c.promise()},ImageUploader.installJRE=function(){-1!=navigator.platform.toLowerCase().indexOf("win32")?url=ImageUploader.APPLET_CODEBASE+"jre-8u202-windows-i586.exe":-1!=navigator.platform.toLowerCase().indexOf("win64")&&(url=ImageUploader.APPLET_CODEBASE+"jre-6u24-windows-x64.exe"),window.open(url)},ImageUploader.onLoadComplete=function(){ImageUploader.IS_INIT=!0},ImageUploader.isLoadComplete=function(){return!ImageUploader.DISABLED&&ImageUploader.IS_INIT},ImageUploader.getClipboardData=function(){return ImageUploader.CONTROL.getAllowEditorClipboardData()},ImageUploader.uploadImage=function(a,b){var c={},d=!1;if($.each($("img",b),function(b,e){var f=null;try{f=e.src}catch(a){f=null}f&&a._checkUploadImage(f)&&(null==c[e.src]&&(c[e.src]=[]),c[e.src].push(e),d=!0)}),!d)return null;var e={},f={};for(var g in c){var h=filePath=g,i=null;-1!=h.search(/^(?:file:\/\/\/|[a-zA-Z]:)/)?(filePath=decodeURIComponent(filePath),filePath=filePath.replace("file:///","").replace("\\","/")):filePath=decodeURIComponent(filePath).split("?")[0],i=filePath,-1!=i.lastIndexOf("/")&&(i=i.substring(i.lastIndexOf("/")+1)),i=-1!=i.lastIndexOf(".")?i.substring(i.lastIndexOf(".")+1):"gif","wmz"==i.toLowerCase();var j=a._getUploadImageInfo("","",i,"control"),k=(j.cid,j.name),l=j.url;ImageUploader.CONTROL.imageUploadPostUrl(l),ImageUploader.CONTROL.imageUploadFileField(j.fieldname),"domino"==j.type&&(ImageUploader.CONTROL.imageUploadTextField("__Click","0"),ImageUploader.CONTROL.imageUploadTextField("%%PostCharset","UTF-8"),ImageUploader.CONTROL.imageUploadTextField("Body",""));for(var m in j.postdata)ImageUploader.CONTROL.imageUploadTextField(m,j.postdata[m]);-1!=h.search(/^(?:file:\/\/\/|[a-zA-Z]:)/)?(e[k]=c[g],ImageUploader.CONTROL.imageUploadFile(k,filePath)):(e[k]=c[g],ImageUploader.CONTROL.imageUploadURL(k,filePath));var n=ImageUploader.CONTROL.imageUpload();j.uploadedImage=f,j.uploadImageById=e,a._parseUploadResponse(n,j,"applet")}var o={uploadedImage:f,uploadId:e};for(var m in o.uploadedImage){var p=o.uploadId[m];if(null!=p)for(var q=0;q<p.length;q++)p[q].src=o.uploadedImage[m]}return b};